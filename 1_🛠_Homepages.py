
import streamlit as st
from easy_ernie import FastErnie

fastErnie=''

st.set_page_config(page_title="gpt", page_icon="🤖")
st.title("🙂 welcome to gpt")

if "BAIDUID" not in st.session_state:
    st.session_state["BAIDUID"] = ''
if "BDUSS_BFESS" not in st.session_state:
    st.session_state["BDUSS_BFESS"] = ''
if st.session_state["BAIDUID"] != '' and st.session_state["BDUSS_BFESS"] != '':
     fastErnie = FastErnie(st.session_state["BAIDUID"],st.session_state["BDUSS_BFESS"])


with st.container():
    st.header("gpt")
    st.markdown(f"""
    | gpt BAIDUID | gpt BDUSS_BFESS |
    | ----------- | --------------- |
    | {st.session_state["BAIDUID"]} | {st.session_state["BDUSS_BFESS"]} |
    """)
if "messages" not in st.session_state:
    st.session_state["messages"] = []



if fastErnie!='':
    with st.container():
        
        st.header("chat to gpt")




        st.markdown("运行速度可能较慢，请耐心等待！(输入/exit()退出)")
        prompt = st.chat_input("Type something...")
        if prompt == '/exit()':
            fastErnie.close()
        else:
            if prompt:
               
                with st.chat_message("user"):
                    st.markdown("👨🏻 你:"+prompt)
                da = fastErnie.ask(prompt)
                with st.chat_message("assistant"):
                    

                    st.markdown("🤖 文心一言:"+da["answer"])
            
else:
    with st.container():
        st.warning("😭 please input BAIDUID and BDUSS_BFESS ❗️")
#1_🛠_Homepages.py



